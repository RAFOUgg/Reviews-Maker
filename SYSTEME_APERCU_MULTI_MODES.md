# 🎨 Système d'Aperçu Professionnel Multi-Modes

## 📋 Vue d'ensemble

Un système complet d'aperçu de reviews avec **4 modes d'affichage différents** permettant à l'utilisateur de choisir la présentation qui lui convient le mieux. Le choix est **persisté automatiquement** et restauré à chaque visite.

---

## ✨ Les 4 Modes d'Aperçu

### 1️⃣ **MODE MINIMAL** (━)
**Philosophie** : Épuré et minimaliste

#### Caractéristiques :
- ✅ Icône animée flottante
- ✅ Titre gradient stylisé
- ✅ Score principal XXL (4rem)
- ✅ Barre de progression simple
- ✅ Nombre de sections complétées
- ✅ Couleurs adaptatives selon le score (excellent/good/average)

#### Idéal pour :
- Vue rapide du score
- Présentation simple et claire
- Focus sur l'essentiel
- Utilisateurs mobiles

#### Design :
```
        🌸
    
  Gelato 41 + Zkittlez
       Fleur

      ╔═══════╗
      ║  8.5  ║
      ║  /10  ║
      ╚═══════╝
   
   ████████████░░  85.2 / 100 points
   
   [5 sections complétées]
```

---

### 2️⃣ **MODE COMPACT** (▤)
**Philosophie** : Condensé mais informatif

#### Caractéristiques :
- ✅ Badge de type de produit
- ✅ Anneau de score SVG animé (cercle progressif)
- ✅ Détails du score (total + sections)
- ✅ Liste des sections avec barres de progression
- ✅ Effet hover sur les sections
- ✅ Design carte moderne

#### Idéal pour :
- Vue d'ensemble complète
- Suivi de progression
- Comparaison rapide des sections
- Balance information/espace

#### Design :
```
╔═══════════════════════════════════════╗
║  🧊 Hash    Gelato 41 + Zkittlez     ║
║                                       ║
║  ╭──○ 8.5 ──╮  Score total: 85.2/100║
║  │   /10    │  Sections: 5/7         ║
║  ╰──────────╯                         ║
║                                       ║
║  Visuel & Technique      28.5/30 ███ ║
║  Odeur                   18.2/20 ███ ║
║  Texture                 45.0/50 ███ ║
║  Goûts & Fumée          25.8/30 ████ ║
║  Effet                   18.5/20 ███ ║
╚═══════════════════════════════════════╝
```

---

### 3️⃣ **MODE DÉTAILLÉ** (☰)
**Philosophie** : Maximum d'informations

#### Caractéristiques :
- ✅ Cartes détaillées des cultivars
- ✅ Grand anneau de score (120px)
- ✅ Breakdown complet du score
- ✅ Toutes les sections développées
- ✅ Tous les champs avec leurs valeurs
- ✅ Barres de progression pour chaque note
- ✅ Tags pour les choix multiples
- ✅ Listes ordonnées pour les pipelines
- ✅ Affichage des cultivars par étape

#### Idéal pour :
- Analyse approfondie
- Revue complète avant export
- Documentation détaillée
- Utilisateurs desktop

#### Design :
```
╔═══════════════════════════════════════════╗
║   🧊 Hash                                 ║
║   Gelato 41 + Zkittlez                   ║
║                                           ║
║   🌿 1  Gelato 41                        ║
║        📍 La Ferme Bio • 🧬 Cookies Fam  ║
║        🌱 Fleurs fraîches                 ║
║                                           ║
║   🌿 2  Zkittlez                         ║
║        📍 Green Valley • 🧬 Dying Breed   ║
║        🌱 Fleurs sèches                   ║
║                                           ║
║   ╭────○ 8.5 ────╮  Score global        ║
║   │     /10      │  85.2 / 100 points   ║
║   │              │  5 sections complétées║
║   ╰──────────────╯                       ║
║                                           ║
║ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ ║
║ ┃ Visuel & Technique      28.5/30 ███ ┃ ║
║ ┃ ───────────────────────────────────  ┃ ║
║ ┃ COULEUR/TRANSPARENCE                 ┃ ║
║ ┃ 9.5  ████████████████████░           ┃ ║
║ ┃                                       ┃ ║
║ ┃ PURETÉ VISUELLE                      ┃ ║
║ ┃ 9.0  ████████████████████             ┃ ║
║ ┃                                       ┃ ║
║ ┃ DENSITÉ                              ┃ ║
║ ┃ 10.0 ████████████████████████         ┃ ║
║ ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ ║
║                                           ║
║ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ ║
║ ┃ Pipeline de séparation                ┃ ║
║ ┃ 1. Tamisage WPFF (90–120µm)          ┃ ║
║ ┃    🌿 Gelato 41, Zkittlez            ┃ ║
║ ┃ 2. Tamisage à l'eau (45–73µm)        ┃ ║
║ ┃    🌿 Gelato 41                       ┃ ║
║ ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ ║
╚═══════════════════════════════════════════╝
```

---

### 4️⃣ **MODE CARTE** (▣)
**Philosophie** : Style réseaux sociaux

#### Caractéristiques :
- ✅ Image principale en 16:9 (ou placeholder)
- ✅ Badge overlay sur l'image
- ✅ Grand badge de score coloré
- ✅ Statistiques rapides en grille (icônes)
- ✅ Top 4 des sections avec scores
- ✅ Design moderne type Instagram/Pinterest
- ✅ Parfait pour partage social

#### Idéal pour :
- Partage sur réseaux sociaux
- Présentation visuelle
- Export image
- Première impression

#### Design :
```
╔═══════════════════════════════════════╗
║ ┌───────────────────────────────────┐ ║
║ │       [IMAGE 16:9]                │ ║
║ │   🧊 Hash  ╭─────────────╮       │ ║
║ │            │  Overlay     │       │ ║
║ │            ╰─────────────╯        │ ║
║ └───────────────────────────────────┘ ║
║                                       ║
║  Gelato 41 + Zkittlez                ║
║  ╭─────────╮                         ║
║  │  8.5/10 │                         ║
║  ╰─────────╯                         ║
║                                       ║
║  📊 Score       ✓ Sections  📍 Farm ║
║  85.2/100       5/7         Bio Farm ║
║                                       ║
║  Visuel & Technique        9.5 ████  ║
║  Odeur                     9.1 ████  ║
║  Texture                   9.0 ████  ║
║  Goûts & Fumée            8.6 ███   ║
╚═══════════════════════════════════════╝
```

---

## 🎛️ Sélecteur de Mode

### Interface
Barre de boutons en haut de chaque aperçu :

```
┌─────┬─────┬─────┬─────┐
│  ━  │  ▤  │  ☰  │  ▣  │
└─────┴─────┴─────┴─────┘
 Mini Comp Détl Carte
```

### Interactions :
- ✅ **Hover** : Léger survol avec changement de couleur
- ✅ **Active** : Gradient primaire + shadow
- ✅ **Animation** : Transform translateY(-2px) sur hover
- ✅ **Tooltips** : Titres descriptifs

---

## 💾 Persistance

### localStorage
```javascript
// Sauvegarde automatique
localStorage.setItem('previewMode', mode);

// Chargement au démarrage
currentPreviewMode = localStorage.getItem('previewMode') || 'detailed';
```

### Valeurs possibles :
- `'minimal'` - Mode minimal
- `'compact'` - Mode compact
- `'detailed'` - Mode détaillé (défaut)
- `'card'` - Mode carte

---

## 🎨 Système de Couleurs Adaptatif

### Score >= 8.0 : **Excellent** 🟢
```css
background: linear-gradient(135deg, 
  rgba(16, 185, 129, 0.25), 
  rgba(52, 211, 153, 0.25)
);
border-color: rgba(16, 185, 129, 0.6);
```

### Score >= 6.0 : **Good** 🔵
```css
background: linear-gradient(135deg, 
  rgba(56, 189, 248, 0.25), 
  rgba(59, 130, 246, 0.25)
);
border-color: rgba(56, 189, 248, 0.6);
```

### Score < 6.0 : **Average** 🟡
```css
background: linear-gradient(135deg, 
  rgba(251, 191, 36, 0.25), 
  rgba(245, 158, 11, 0.25)
);
border-color: rgba(251, 191, 36, 0.6);
```

---

## 🚀 Fonctionnalités Avancées

### 1. **Anneaux de Score SVG**
- Animation de remplissage progressive (0.8s ease)
- Stroke gradient (primary → accent)
- Calcul automatique du dasharray
- Responsive (tailles 100px ou 120px)

### 2. **Barres de Progression**
- Gradient linéaire animé
- Transition fluide (0.8s)
- Couleurs primary → accent
- Adaptatives selon le pourcentage

### 3. **Tags et Chips**
- Styles différenciés :
  - Tags normaux : primary
  - Tags cultivars : accent
- Border radius 16px
- Hover effects subtils

### 4. **Animations**
```css
/* Float pour icône minimal */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

/* Transitions globales */
transition: all 0.2s ease;
```

---

## 📊 Données Affichées

### Tous les modes incluent :
- ✅ Type de produit (Hash, Fleur, Concentré, Comestible)
- ✅ Nom du/des cultivar(s)
- ✅ Score global sur 10
- ✅ Pourcentage de complétion

### Modes Compact/Détaillé/Carte ajoutent :
- ✅ Détails des cultivars (farm, breeder, matière)
- ✅ Scores par section
- ✅ Nombre de sections complétées

### Mode Détaillé uniquement :
- ✅ Tous les champs avec valeurs
- ✅ Pipelines avec cultivars associés
- ✅ Paramètres techniques (mesh, température, etc.)
- ✅ Tags et listes formatés

---

## 🎯 Cas d'Usage

| Mode | Mobile | Desktop | Export | Partage | Analyse |
|------|--------|---------|--------|---------|---------|
| **Minimal** | ⭐⭐⭐ | ⭐⭐ | ⭐⭐ | ⭐⭐ | ⭐ |
| **Compact** | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ | ⭐⭐ |
| **Détaillé** | ⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐ | ⭐⭐⭐ |
| **Carte** | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ |

---

## 🔧 Architecture Technique

### Fonctions principales :

```javascript
// Gestion du mode
setPreviewMode(mode)           // Change le mode et regenerate
currentPreviewMode            // Variable globale du mode actif

// Génération d'aperçu
generateReview()              // Dispatcher principal
getPreviewData()              // Collecte les données communes

// Modes spécifiques
generateMinimalPreview()
generateCompactPreview()
generateDetailedPreview()
generateCardPreview()
generateFullReview()          // Pour l'export (inchangé)
```

### Helpers :
```javascript
getPreviewData() {
  return {
    structure,           // Structure du produit
    cultivarInfo,        // Infos cultivars
    productIcon,         // Icône emoji
    globalScore,         // Score total
    maxGlobalScore,      // Score maximum
    sectionsWithData,    // Sections complétées
    scoreOutOf10,        // Score sur 10
    percentage          // Pourcentage
  }
}
```

---

## 📱 Responsive

### Adaptations automatiques :
- Grilles : `grid-template-columns: repeat(auto-fit, minmax(140px, 1fr))`
- Images : `aspect-ratio: 16/9` + `object-fit: cover`
- Text : `clamp()` pour tailles fluides
- Spacing : Variables CSS cohérentes

---

## ✅ Tests Recommandés

1. **Changer de mode** pendant l'édition
2. **Recharger la page** → vérifier persistance
3. **Tester avec 0 score** (sections vides)
4. **Tester avec score parfait** (10/10)
5. **Tester avec/sans image**
6. **Tester avec 1 cultivar vs plusieurs**
7. **Export image** depuis chaque mode

---

## 🎨 Personnalisation Future

### Extensions possibles :
- [ ] Mode "Liste" (tableau)
- [ ] Mode "Timeline" (chronologique)
- [ ] Mode "Radar Chart" (graphique)
- [ ] Thèmes de couleurs personnalisables
- [ ] Export PDF par mode
- [ ] Comparaison côte-à-côte
- [ ] Mode impression optimisé

---

**Statut** : ✅ **100% Fonctionnel et Professionnel**

Testez tous les modes en créant une review et en cliquant sur les boutons !

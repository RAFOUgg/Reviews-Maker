<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Composition, prÃ©visualisation et exportation de reviews produits cannabis. CommunautÃ© et partage d'expertise." />
  <title>ğŸ“‘ Reviews Maker </title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="ink\logo.png" />
</head>
<body class="home-page">
  <div class="app-shell">
    <header class="top-nav" role="banner">
      <div class="brand" role="button" tabindex="0" aria-label="Accueil">
        <span class="brand-mark" aria-hidden="true"><img src="ink\logo.png" alt="" style="width:22px;height:22px;object-fit:contain;border-radius:4px" /></span>
        <div class="brand-text">
          <strong>Reviews Maker</strong>
          <span>Analyse de qualitÃ©</span>
        </div>
      </div>
      <div class="top-nav-status">
        <div class="nav-actions">
          <span class="pill-btn" id="openMyLibrary" title="Ma bibliothÃ¨que personnelle" tabindex="0" role="button" style="display:none;">
            <span aria-hidden="true">ğŸ“š</span>
            Ma bibliothÃ¨que
          </span>
          <span class="pill-btn" id="openTips" title="Afficher les raccourcis et astuces" tabindex="0" role="button">
            <span aria-hidden="true">ğŸ’¡</span>
            Astuce
          </span>
        </div>
      </div>
    </header>

    <main class="workspace home-workspace" role="main">
      <!-- Section Hero -->
      <section class="hero-section">
        <div class="hero-content">
          <h1 class="hero-title">Composez une review premium</h1>
          <p class="hero-subtitle">SÃ©lectionnez le type de produit pour activer les blocs adaptÃ©s.</p>
          
          <!-- SÃ©lection du type de produit -->
          <div class="type-selector" role="list">
            <button type="button" class="type-card" data-type="Hash" role="listitem">
              <span class="type-icon" aria-hidden="true">ğŸ«</span>
              <div class="type-content">
                <span class="type-title">Hash</span>
                <span class="type-caption">bubble hash, WPFF, dry sift, etc.</span>
              </div>
            </button>
            <button type="button" class="type-card" data-type="Fleur" role="listitem">
              <span class="type-icon" aria-hidden="true">ğŸƒ</span>
              <div class="type-content">
                <span class="type-title">Fleur</span>
                <span class="type-caption">Indoor, outdoor, greenhouseâ€¦</span>
              </div>
            </button>
            <button type="button" class="type-card" data-type="ConcentrÃ©" role="listitem">
              <span class="type-icon" aria-hidden="true">ğŸ¯</span>
              <div class="type-content">
                <span class="type-title">ConcentrÃ©</span>
                <span class="type-caption">Rosin, BHO, live resin, etc.</span>
              </div>
            </button>
            <button type="button" class="type-card" data-type="Comestible" role="listitem">
              <span class="type-icon" aria-hidden="true">ğŸ¬</span>
              <div class="type-content">
                <span class="type-title">Comestible</span>
                <span class="type-caption">PÃ¢tisserie, boisson, huileâ€¦</span>
              </div>
            </button>
          </div>

          <!-- Actions rapides retirÃ©es: la gestion des brouillons se fait via la galerie -->
        </div>
      </section>

      <!-- BibliothÃ¨que des reviews -->
      <section class="library-section">
        <div class="section-header">
          <h2 class="section-title">
            <span aria-hidden="true">ğŸ“š</span>
            Galerie
          </h2>
          <div class="tabs" id="homeTabs" style="display:none; gap:.5rem;">
            <button type="button" class="btn btn-outline btn-sm" data-tab="public">Galerie publique</button>
            <button type="button" class="btn btn-outline btn-sm" data-tab="mine">Ma bibliothÃ¨que</button>
          </div>
          <button type="button" class="btn btn-ghost" id="openFullLibrary">Voir tout</button>
        </div>

        <!-- BibliothÃ¨que compacte -->
        <div class="compact-library" id="compactLibrary">
          <div class="compact-library-empty" id="compactLibraryEmpty" style="display: none;">
            <span class="empty-icon" aria-hidden="true">ğŸ“</span>
            <p>Aucune review encore crÃ©Ã©e</p>
            <span class="empty-hint">Commencez par choisir un type de produit ci-dessus</span>
          </div>
          <div class="compact-library-list" id="compactLibraryList"></div>
          <div class="compact-library-list" id="compactMyList" style="display:none"></div>
          <div class="library-actions-below">
            <button type="button" class="btn btn-outline" id="showMoreLibrary">Voir plus</button>
          </div>
        </div>
      </section>
    </main>

    <!-- Modal BibliothÃ¨que complÃ¨te -->
    <div class="modal" id="libraryModal" style="display: none;">
      <div class="modal-overlay" id="libraryModalOverlay"></div>
      <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="libraryTitle">
        <div class="modal-header">
          <h2 id="libraryTitle">BibliothÃ¨que complÃ¨te</h2>
          <button type="button" class="modal-close" id="closeLibrary" aria-label="Fermer">
            <span aria-hidden="true">Ã—</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="search-bar">
            <input type="text" id="librarySearch" placeholder="Rechercher par nom, variÃ©tÃ©, farm..." class="search-input">
          </div>
          <div class="library-grid" id="libraryGrid">
            <!-- Reviews complÃ¨tes seront gÃ©nÃ©rÃ©es ici -->
          </div>
          <div class="library-empty" id="libraryEmpty" style="display: none;">
            <span class="empty-icon" aria-hidden="true">ğŸ“š</span>
            <p>Aucune review trouvÃ©e</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Astuces -->
    <div class="modal" id="tipsModal" style="display: none;">
      <div class="modal-overlay" id="tipsModalOverlay"></div>
      <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="tipsTitle">
        <div class="modal-header">
          <h2 id="tipsTitle">Raccourcis & Astuces</h2>
          <button type="button" class="modal-close" id="closeTips" aria-label="Fermer">
            <span aria-hidden="true">Ã—</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="tips-content">
            <div class="tip-group">
              <h3>ğŸ¯ Navigation</h3>
              <ul>
                <li><kbd>Tab</kbd> / <kbd>Shift</kbd> + <kbd>Tab</kbd> : Navigation entre les champs</li>
                <li><kbd>Ã‰chap</kbd> : Fermer les modales</li>
                <li>Cliquer sur le logo : Retour Ã  l'accueil</li>
              </ul>
            </div>
            <div class="tip-group">
              <h3>âœ¨ FonctionnalitÃ©s</h3>
              <ul>
                <li>Sauvegarde automatique pendant la saisie</li>
                <li>AperÃ§u en temps rÃ©el</li>
                <li>Export haute qualitÃ© en PNG</li>
                <li>Gestion des brouillons</li>
              </ul>
            </div>
            <div class="tip-group">
              <h3>ğŸ“ Bonnes pratiques</h3>
              <ul>
                <li>Remplissez au minimum les sections obligatoires</li>
                <li>Ajoutez une photo pour un rendu optimal</li>
                <li>Utilisez des descriptions dÃ©taillÃ©es</li>
                <li>Sauvegardez rÃ©guliÃ¨rement vos reviews importantes</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Connexion / Authentification -->
  <div class="modal" id="authModal" style="display: none;">
    <div class="modal-overlay" id="authModalOverlay"></div>
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="authTitle">
      <div class="modal-header">
        <h2 id="authTitle">Connexion</h2>
        <button type="button" class="modal-close" id="closeAuth" aria-label="Fermer">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="auth-content">
          <p class="auth-description">Liez votre compte pour synchroniser vos reviews sur le serveur et y accÃ©der depuis n'importe quel appareil.</p>
          <div class="form-group">
            <label for="authTokenInput">Token d'authentification</label>
            <input type="password" id="authTokenInput" class="input" placeholder="Entrez votre token..." />
          </div>
          <div class="auth-status" id="authStatus" style="display:none;"></div>
          <div class="auth-actions">
            <button type="button" class="btn btn-primary" id="authConnect">Se connecter</button>
            <button type="button" class="btn btn-outline" id="authDisconnect" style="display:none;">Se dÃ©connecter</button>
          </div>
          <p class="auth-help">Vous n'avez pas de token ? Contactez un administrateur.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Bouton flottant de connexion -->
  <button type="button" class="floating-auth-btn" id="floatingAuthBtn" title="Lier mon compte">
    <span aria-hidden="true">ğŸ”—</span>
  </button>

  <!-- Preview-only Overlay for home page (to visualize a review from gallery) -->
  <div id="previewOverlay" class="preview-overlay" hidden></div>
  <div id="previewModal" class="preview-modal" role="dialog" aria-modal="true" aria-label="AperÃ§u de la review" hidden>
    <header class="preview-modal-header">
      <h3>AperÃ§u</h3>
      <div class="actions">
        <button type="button" class="btn btn-secondary btn-sm" id="downloadPreviewPng">TÃ©lÃ©charger l'image</button>
        <button type="button" class="pill-btn" id="closePreviewModal" title="Fermer">âœ•</button>
      </div>
    </header>
    <div class="preview-modal-body">
      <div id="previewModalContent" class="review-content"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
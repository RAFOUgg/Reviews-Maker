<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Composition, pr√©visualisation et exportation de reviews produits cannabis. Communaut√© et partage d'expertise." />
  <title>üìë Reviews Maker </title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="ink\logo.png" />
</head>
<body class="home-page">
  <div class="app-shell">
    <header class="top-nav" role="banner">
      <div class="brand" role="button" tabindex="0" aria-label="Accueil">
        <span class="brand-mark" aria-hidden="true"><img src="ink\logo.png" alt="" style="width:22px;height:22px;object-fit:contain;border-radius:4px" /></span>
        <div class="brand-text">
          <strong>Reviews Maker</strong>
          <span>Analyse de qualit√©</span>
        </div>
      </div>
      <div class="top-nav-status">
          <div class="nav-actions">
          <span class="pill-btn" id="openTips" title="Afficher les raccourcis et astuces" tabindex="0" role="button">
            <span aria-hidden="true">üí°</span>
            Astuce
          </span>
        </div>
      </div>
    </header>

    <main class="workspace home-workspace" role="main">
      <!-- Section Hero -->
      <section class="hero-section">
        <div class="hero-content">
          <h1 class="hero-title">Composez une review premium</h1>
          <p class="hero-subtitle">S√©lectionnez le type de produit pour activer les blocs adapt√©s.</p>
          
          <!-- S√©lection du type de produit -->
          <div class="type-selector" role="list">
            <button type="button" class="type-card" data-type="Hash" role="listitem">
              <span class="type-icon" aria-hidden="true">üç´</span>
              <div class="type-content">
                <span class="type-title">Hash</span>
                <span class="type-caption">bubble hash, WPFF, dry sift, etc.</span>
              </div>
            </button>
            <button type="button" class="type-card" data-type="Fleur" role="listitem">
              <span class="type-icon" aria-hidden="true">üçÉ</span>
              <div class="type-content">
                <span class="type-title">Fleur</span>
                <span class="type-caption">Indoor, outdoor, greenhouse‚Ä¶</span>
              </div>
            </button>
            <button type="button" class="type-card" data-type="Concentr√©" role="listitem">
              <span class="type-icon" aria-hidden="true">üçØ</span>
              <div class="type-content">
                <span class="type-title">Concentr√©</span>
                <span class="type-caption">Rosin, BHO, live resin, etc.</span>
              </div>
            </button>
            <button type="button" class="type-card" data-type="Comestible" role="listitem">
              <span class="type-icon" aria-hidden="true">üç¨</span>
              <div class="type-content">
                <span class="type-title">Comestible</span>
                <span class="type-caption">P√¢tisserie, boisson, huile‚Ä¶</span>
              </div>
            </button>
          </div>

          <!-- Actions rapides retir√©es: la gestion des brouillons se fait via la galerie -->
        </div>
      </section>

      <!-- Biblioth√®que des reviews -->
      <section class="library-section">
        <div class="section-header">
          <h2 class="section-title">
            <span aria-hidden="true">üìö</span>
            Galerie publique
          </h2>
          <button type="button" class="btn btn-ghost" id="openFullLibrary">Voir tout</button>
        </div>

        <!-- Biblioth√®que compacte -->
        <div class="compact-library" id="compactLibrary">
          <div class="compact-library-empty" id="compactLibraryEmpty" style="display: none;">
            <span class="empty-icon" aria-hidden="true">üìù</span>
            <p>Aucune review encore cr√©√©e</p>
            <span class="empty-hint">Commencez par choisir un type de produit ci-dessus</span>
          </div>
          <div class="compact-library-list" id="compactLibraryList"></div>
          <div class="library-actions-below">
            <button type="button" class="btn btn-outline" id="showMoreLibrary">Voir plus</button>
          </div>
        </div>
      </section>
    </main>

    <!-- Modal Biblioth√®que compl√®te -->
    <div class="modal" id="libraryModal" style="display: none;">
      <div class="modal-overlay" id="libraryModalOverlay"></div>
      <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="libraryTitle">
        <div class="modal-header">
          <div style="display:flex;align-items:center;gap:12px;">
            <button type="button" class="btn btn-ghost" id="libraryBackToAccount" style="display:none;">‚Üê Retour</button>
            <h2 id="libraryTitle">üñºÔ∏è Galerie publique</h2>
          </div>
          <button type="button" class="modal-close" id="closeLibrary" aria-label="Fermer">
            <span aria-hidden="true">√ó</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="search-bar">
            <input type="text" id="librarySearch" placeholder="Rechercher par nom, vari√©t√©, farm..." class="search-input">
          </div>
          <div class="library-grid" id="libraryGrid">
            <!-- Reviews compl√®tes seront g√©n√©r√©es ici -->
          </div>
          <div class="library-empty" id="libraryEmpty" style="display: none;">
            <span class="empty-icon" aria-hidden="true">üìö</span>
            <p>Aucune review trouv√©e</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Astuces -->
    <div class="modal" id="tipsModal" style="display: none;">
      <div class="modal-overlay" id="tipsModalOverlay"></div>
      <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="tipsTitle">
        <div class="modal-header">
          <h2 id="tipsTitle">Raccourcis & Astuces</h2>
          <button type="button" class="modal-close" id="closeTips" aria-label="Fermer">
            <span aria-hidden="true">√ó</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="tips-content">
            <div class="tip-group">
              <h3>üéØ Navigation</h3>
              <ul>
                <li><kbd>Tab</kbd> / <kbd>Shift</kbd> + <kbd>Tab</kbd> : Navigation entre les champs</li>
                <li><kbd>√âchap</kbd> : Fermer les modales</li>
                <li>Cliquer sur le logo : Retour √† l'accueil</li>
              </ul>
            </div>
            <div class="tip-group">
              <h3>‚ú® Fonctionnalit√©s</h3>
              <ul>
                <li>Sauvegarde automatique pendant la saisie</li>
                <li>Aper√ßu en temps r√©el</li>
                <li>Export haute qualit√© en PNG</li>
                <li>Gestion des brouillons</li>
              </ul>
            </div>
            <div class="tip-group">
              <h3>üìù Bonnes pratiques</h3>
              <ul>
                <li>Remplissez au minimum les sections obligatoires</li>
                <li>Ajoutez une photo pour un rendu optimal</li>
                <li>Utilisez des descriptions d√©taill√©es</li>
                <li>Sauvegardez r√©guli√®rement vos reviews importantes</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Connexion / Authentification -->
    <!-- Redesigned Account Modal (same structure as in review.html) -->
    <div class="modal" id="accountModal" style="display:none;">
      <div class="modal-overlay" id="accountModalOverlay"></div>
      <div class="modal-content account-modal-content" role="dialog" aria-modal="true" aria-labelledby="accountTitle">
        <header class="modal-header">
          <h2 id="accountTitle">Mon compte</h2>
          <div style="display:flex;gap:8px;align-items:center;">
            <button type="button" class="btn btn-ghost" id="openAccountSettings" title="Param√®tres">‚öôÔ∏è Param√®tres</button>
            <button type="button" class="modal-close" id="closeAccountModal" aria-label="Fermer">‚úï</button>
          </div>
        </header>

        <div class="modal-body account-modal-inner">
          <!-- Left column: profile & stats -->
          <div class="account-left">
            <div class="account-profile">
              <div class="account-avatar" aria-hidden="true">üë§</div>
              <div class="account-meta">
                <div id="accountEmail">‚Äî</div>
                <div class="sub">Membre Reviews Maker</div>
              </div>
            </div>

            <div class="account-stats">
              <div class="stat-card">
                <div class="num" id="accountTotal">0</div>
                <div class="label">Total</div>
              </div>
              <div class="stat-card">
                <div class="num" id="statPublic">0</div>
                <div class="label">Public</div>
              </div>
              <div class="stat-card">
                <div class="num" id="statPrivate">0</div>
                <div class="label">Priv√©</div>
              </div>
            </div>

            <div>
              <h4 class="section-title">R√©partition par type</h4>
              <div id="accountStatsByType" class="account-stats-by-type"></div>
            </div>
          </div>

          <!-- Right column: actions & preferences -->
          <aside class="account-right">
            <div class="account-actions panel-section">
              <h4 class="section-title">Actions</h4>
              <div class="action-list">
                <button class="btn btn-outline" id="openLibraryFromAccount">Ma biblioth√®que</button>
                <button class="btn btn-outline" id="accountDisconnect">Se d√©connecter</button>
              </div>
            </div>

            <div class="account-preferences panel-section">
              <h4 class="section-title">Pr√©f√©rences</h4>
              <div class="form-group">
                <label for="themeSelect">Th√®me</label>
                <select id="themeSelect" class="theme-select">
                  <option value="auto">Automatique</option>
                  <option value="violet">Violet sombre</option>
                  <option value="rose">Rose p√¢le</option>
                  <option value="bluish">Bleu fonc√© (gris)</option>
                </select>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </div>

  <div class="modal" id="authModal" style="display: none;">
    <div class="modal-overlay" id="authModalOverlay"></div>
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="authTitle">
      <div class="modal-header">
        <h2 id="authTitle">Connexion</h2>
        <button type="button" class="modal-close" id="closeAuth" aria-label="Fermer">
          <span aria-hidden="true">√ó</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="auth-content">
          <p class="auth-description">Liez votre compte pour synchroniser vos reviews sur le serveur et y acc√©der depuis n'importe quel appareil.</p>
          
          <!-- √âtape 1: Demande d'email -->
          <div id="authStepEmail" class="auth-step">
            <div class="form-group">
              <label for="authEmailInput">Adresse email</label>
              <input type="email" id="authEmailInput" class="input" placeholder="votre@email.com" />
            </div>
            <div class="auth-actions">
              <button type="button" class="btn btn-primary" id="authSendCode">Envoyer le code</button>
            </div>
          </div>
          
          <!-- √âtape 2: V√©rification du code -->
          <div id="authStepCode" class="auth-step" style="display:none;">
            <p class="auth-info">Un code de v√©rification a √©t√© envoy√© √† <strong id="authEmailDisplay"></strong></p>
            <div class="form-group">
              <label for="authCodeInput">Code de v√©rification</label>
              <input type="text" id="authCodeInput" class="input" placeholder="123456" maxlength="6" />
            </div>
            <div class="auth-actions">
              <button type="button" class="btn btn-outline" id="authBack">Retour</button>
              <button type="button" class="btn btn-primary" id="authVerifyCode">V√©rifier</button>
            </div>
            <p class="auth-help">Code non re√ßu ? <button type="button" class="link-btn" id="authResendCode">Renvoyer</button></p>
          </div>
          
          <!-- √âtape 3: Connect√© -->
          <div id="authStepConnected" class="auth-step" style="display:none;">
            <p class="auth-info">Connect√© en tant que <strong id="authConnectedEmail"></strong></p>
            <div class="auth-account-summary" style="margin-top:10px;">
              <div style="display:flex; gap:12px; align-items:center;">
                <div><strong id="authConnTotal">0</strong><div style="font-size:0.85rem;color:var(--text-muted);">Total</div></div>
                <div><strong id="authConnPublic">0</strong><div style="font-size:0.85rem;color:var(--text-muted);">Public</div></div>
                <div><strong id="authConnPrivate">0</strong><div style="font-size:0.85rem;color:var(--text-muted);">Priv√©</div></div>
              </div>
              <div id="authConnByType" style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;"></div>
            </div>
            <div class="auth-actions" style="margin-top:12px;">
              <button type="button" class="btn btn-outline" id="authOpenLibrary">Ma biblioth√®que</button>
              <button type="button" class="btn btn-outline" id="authDisconnect">Se d√©connecter</button>
            </div>
          </div>
          
          <div class="auth-status" id="authStatus" style="display:none;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bouton flottant de connexion -->
  <button type="button" class="floating-auth-btn" id="floatingAuthBtn" title="Lier mon compte">
    <span aria-hidden="true">üîó</span>
  </button>

  <!-- Preview-only Overlay for home page (to visualize a review from gallery) -->
  <div id="previewOverlay" class="preview-overlay" hidden></div>
  <div id="previewModal" class="preview-modal" role="dialog" aria-modal="true" aria-label="Aper√ßu de la review" hidden>
    <header class="preview-modal-header">
      <h3>Aper√ßu</h3>
      <div class="actions">
        <button type="button" class="btn btn-secondary btn-sm" id="downloadPreviewPng">T√©l√©charger l'image</button>
        <button type="button" class="pill-btn" id="closePreviewModal" title="Fermer">‚úï</button>
      </div>
    </header>
    <div class="preview-modal-body">
      <div id="previewModalContent" class="review-content"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="app.js?v=2025-10-16-accmodal-1"></script>
</body>
</html>
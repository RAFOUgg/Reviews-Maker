# SystÃ¨me de Permissions - Matrice ComplÃ¨te

## ğŸ“‹ Types de Comptes

### 1. **Amateur** (Gratuit)
- AccÃ¨s basique aux fonctionnalitÃ©s
- Templates prÃ©dÃ©finis limitÃ©s
- Export qualitÃ© standard

### 2. **Producteur** (Payant 29.99â‚¬/mois)
- AccÃ¨s complet Ã  toutes les fonctionnalitÃ©s
- Templates personnalisÃ©s
- Export haute qualitÃ©
- Pipelines complÃ¨tes
- Arbre gÃ©nÃ©alogique (Fleurs)
- Statistiques avancÃ©es

### 3. **Influenceur** (Payant 15.99â‚¬/mois)
- AccÃ¨s aux aperÃ§us dÃ©taillÃ©s
- Export haute qualitÃ©
- Focus sur rendu visuel
- Drag & drop configurÃ©

---

## ğŸ” Matrice des Permissions DÃ©taillÃ©e

### CREATE_REVIEWS - CrÃ©ation de Reviews

#### Fleurs
| Permission | Amateur | Producteur | Influenceur |
|-----------|---------|-----------|------------|
| Section Infos GÃ©nÃ©rales | âœ“ | âœ“ | âœ“ |
| Section GÃ©nÃ©tiques | âœ— | âœ“ | âœ— |
| Analyses | âœ— | âœ“ | âœ— |
| Pipeline Culture | âœ— | âœ“ | âœ— |
| Visuel & Technique | âœ“ | âœ“ | âœ“ |
| Odeurs | âœ“ | âœ“ | âœ“ |
| Texture | âœ“ | âœ“ | âœ“ |
| GoÃ»ts | âœ“ | âœ“ | âœ“ |
| Effets Ressentis | âœ“ | âœ“ | âœ“ |
| Pipeline Curing | âœ— | âœ“ | âœ“ |


#### Hash
| Permission | Amateur | Producteur | Influenceur |
|-----------|---------|-----------|------------|
| Section Infos GÃ©nÃ©rales | âœ“ | âœ“ | âœ“ |
| Pipeline SÃ©paration | âœ— | âœ“ | âœ“  |
| Visuel & Technique | âœ“ | âœ“ | âœ“ |
| Odeurs | âœ“ | âœ“ | âœ“ |
| Texture | âœ“ | âœ“ | âœ“ |
| GoÃ»ts | âœ“ | âœ“ | âœ“ |
| Effets Ressentis | âœ“ | âœ“ | âœ“ |
| Pipeline Curing | âœ— | âœ“ | âœ“  |

#### ConcentrÃ©s
| Permission | Amateur | Producteur | Influenceur |
|-----------|---------|-----------|------------|
| Section Infos GÃ©nÃ©rales | âœ“ | âœ“ | âœ“ |
| Pipeline Extraction | âœ— | âœ“ | âœ— |
| Visuel & Technique | âœ“ | âœ“ | âœ“ |
| Odeurs | âœ“ | âœ“ | âœ“ |
| Texture | âœ“ | âœ“ | âœ“ |
| GoÃ»ts | âœ“ | âœ“ | âœ“ |
| Effets Ressentis | âœ“ | âœ“ | âœ“ |
| Pipeline Curing | âœ— | âœ“ | âœ“ |

#### Comestibles
| Permission | Amateur | Producteur | Influenceur |
|-----------|---------|-----------|------------|
| Section Infos GÃ©nÃ©rales | âœ“ | âœ“ | âœ“ |
| Pipeline Recette | âœ“ | âœ“ | âœ“ |
| GoÃ»ts | âœ“ | âœ“ | âœ“ |
| Effets Ressentis | âœ“ | âœ“ | âœ“ |

---

### BIBLIOTHEQUE - Gestion Ressources

| Permission | Amateur | Producteur | Influenceur |
|-----------|---------|-----------|------------|
| Voir reviews sauvegardÃ©es | âœ“ | âœ“ | âœ“ |
| Ã‰diter reviews | âœ“ | âœ“ | âœ“ |
| Supprimer reviews | âœ“ | âœ“ | âœ“ |
| Cultiv. & GÃ©nÃ©tiques | âœ— | âœ“ | âœ— |
| Templates prÃ©dÃ©finis | âœ“ | âœ“ | âœ“ |
| Template personnalisÃ© | âœ— | âœ“ | âœ“ |
| Filigranes | âœ— | âœ“ | âœ“  |
| DonnÃ©es rÃ©currentes | âœ— | âœ“ | âœ— |

---

### EXPORT MAKER - Export & Personnalisation

#### Formats
| Format | Amateur | Producteur | Influenceur |
|--------|---------|-----------|------------|
| PNG | QualitÃ© std | 300dpi | 300dpi |
| JPEG | QualitÃ© std | 300dpi | 300dpi |
| PDF | QualitÃ© std | 300dpi | 300dpi |
| SVG | âœ— | âœ“ | âœ“ |
| CSV | âœ— | âœ“ | âœ— |
| JSON | âœ— | âœ“ | âœ— |
| HTML | âœ— | âœ“ | âœ— |

#### Templates
| Template | Amateur | Producteur | Influenceur |
|----------|---------|-----------|------------|
| Compact | âœ“ | âœ“ | âœ“ |
| DÃ©taillÃ© | âœ“ | âœ“ | âœ“ |
| ComplÃ¨te | âœ— | âœ“ | âœ— |
| Influenceur | âœ— | âœ“ | âœ“ |
| PersonnalisÃ© | âœ— | âœ“ | âœ“ |

#### Formats Canva
| Format | Amateur | Producteur | Influenceur |
|--------|---------|-----------|------------|
| 1:1 | âœ“ | âœ“ | âœ“ |
| 16:9 | âœ“ | âœ“ | âœ— |
| 9:16 | âœ“ | âœ“ | âœ“ |
| A4 | âœ— | âœ“ | âœ— |

#### Personnalisation
| Personnalisation | Amateur | Producteur | Influenceur |
|-----------------|---------|-----------|------------|
| ThÃ¨me clair/sombre | âœ“ | âœ“ | âœ“ |
| Palette couleurs | âœ“ | âœ“ | âœ“ |
| Polices web-safe | âœ“ | âœ“ | âœ“ |
| Polices Google Fonts | âœ“ | âœ“ | âœ“ |
| Filigrane | âœ“ | âœ“ | âœ“ |
| Effets images | âœ“ | âœ“ | âœ“ |
| Drag & drop layout | âœ— | âœ“ | âœ“ |

---

### PROFILS - Gestion Compte

| Permission | Amateur | Producteur | Influenceur |
|-----------|---------|-----------|------------|
| Ã‰diter profil | âœ“ | âœ“ | âœ“ |
| Changer mot de passe | âœ“ | âœ“ | âœ“ |
| Activer 2FA | âœ“ | âœ“ | âœ“ |
| KYC optionnel | âœ“ | âœ“ | âœ“ |
| DonnÃ©es entreprise | âœ— | âœ“ | âœ“ |
| PrÃ©fÃ©rences avancÃ©es | âœ“ | âœ“ | âœ“ |

---

### STATISTIQUES

| Stat | Amateur | Producteur | Influenceur |
|------|---------|-----------|------------|
| Reviews crÃ©Ã©es | âœ“ | âœ“ | âœ“ |
| Exports rÃ©alisÃ©s | âœ“ | âœ“ | âœ“ |
| Types produits | âœ“ | âœ“ | âœ“ |
| Notes moyennes donnÃ©es | âœ“ | âœ“ | âœ“ |
| Notes reÃ§ues | âœ“ (publiques) | âœ“ | âœ“ |
| Engagements public | âœ“ (publiques) | âœ“ | âœ“ |
| Stats cultures | âœ— | âœ“ | âœ— |
| Rendements | âœ— | âœ“ | âœ— |
| Stats dÃ©taillÃ©es | âœ— | âœ“ | LimitÃ© |

---

### GALERIE PUBLIQUE

| Permission | Amateur | Producteur | Influenceur |
|-----------|---------|-----------|------------|
| Publier review | âœ“ | âœ“ | âœ“ |
| Garder privÃ©e | âœ“ | âœ“ | âœ“ |
| Voir galerie | âœ“ | âœ“ | âœ“ |
| Liker reviews | âœ“ | âœ“ | âœ“ |
| Commenter | âœ“ | âœ“ | âœ“ |
| Partager | âœ“ | âœ“ | âœ“ |

---

## ğŸ”„ Logique d'Application

### Frontend Guards
```jsx
// Exemple de vÃ©rification de permission
const canEditPipeline = userTier === 'producteur';
const canExportSVG = ['producteur', 'influenceur'].includes(userTier);
```

### Backend Middleware
```javascript
// Middleware de vÃ©rification
function requireTier(tier) {
  return (req, res, next) => {
    if (req.user.tier !== tier) {
      return res.status(403).json({ error: 'Forbidden' });
    }
    next();
  };
}
```

### Routes API ProtÃ©gÃ©es
- `POST /api/reviews` â†’ Tous
- `POST /api/reviews/pipeline` â†’ Producteur seulement
- `POST /api/export/svg` â†’ Producteur/Influenceur
- `GET /api/cultivars` â†’ Producteur seulement
- `GET /api/statistics/advanced` â†’ Producteur seulement

---

## ğŸ“ Notes Importantes

1. **Influenceur** = Focus sur rendu visuel/sharing, pas sur production technique
2. **Producteur** = AccÃ¨s complet incluant donnÃ©es de production/rendement
3. **Amateur** = Utilisateur standard sans fonctionnalitÃ©s avancÃ©es
4. Les donnÃ©es KYC restent optionnelles pour tous les niveaux
5. Toutes les reviews publiques sont commentables par tous (modÃ©ration appliquÃ©e)

---

## ğŸ”— RÃ©fÃ©rences

- `server-new/middleware/auth.js` - Middleware authentification
- `server-new/middleware/permissions.js` - Middleware permissions
- `client/src/hooks/usePermissions.js` - Hook permissions
- `server-new/prisma/schema.prisma` - ModÃ¨le User

/* Overrides to ensure pipeline grid uses a clear min cell and prevents overflow */
[data-testid="pipeline-grid"] {
    grid-template-columns: repeat(auto-fit, minmax(var(--min-cell, 120px), 1fr)) !important;
    grid-auto-rows: var(--min-cell, 120px) !important;
    gap: 8px !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* Ensure each cell fills its grid area */
[data-testid="pipeline-grid"]>* {
    width: 100% !important;
    height: var(--min-cell, 120px) !important;
    min-height: var(--min-cell, 120px) !important;
    box-sizing: border-box !important;
}

/* Sidebar: ensure vertical scrolling and not hidden */
.w-80.overflow-hidden {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch !important;
}

/* Make pipeline scroll wrapper hide horizontal overflow */
[data-testid="pipeline-scroll"] {
    overflow-x: hidden !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    /* Ensure the scroll wrapper can shrink and won't force parents to expand */
    min-height: min(var(--min-rows-height, 200px), 70vh) !important;
    height: 100% !important;
}

/* Optimize cells rendering to minimize repaints */
[data-testid="pipeline-grid"]>* {
    will-change: transform, opacity;
}

.pipeline-cell {
    contain: layout size paint;
    will-change: transform, opacity;
    transform: translateZ(0);
    backface-visibility: hidden;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: stretch;
    box-sizing: border-box;
    padding: 8px;
    height: 100%;
    min-height: var(--min-cell, 96px);
    overflow: hidden;
}

.pipeline-cell .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;}